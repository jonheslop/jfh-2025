---
import { getCollection } from "astro:content";

interface Props {
  type: "posts" | "photos";
}

const { type } = Astro.props;

const [{ data: latestPost, id }] = (await getCollection(type))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 1);

const dateOptions: object = {
  year: "numeric",
  month: "long",
  day: "numeric",
};
---

<a
  class="flex justify-start items-start gap-x-4 group transition-colors flex-1 mb-4"
  href={`/${type}/${id}`}
>
  <div>
    <h1 class="text-2xl xl:text-3xl font-bold text-balance">
      {latestPost.title}
    </h1>
    <p>{latestPost.description}</p>
    <span class="text-sm text-white/70 group-hover:underline"
      >{type === "posts" ? "Continue reading" : "View photos"} &raquo;</span
    >
  </div>
  <span class="block text-white/70 ml-auto shrink-0 text-lg">
    {new Date(latestPost.date).toLocaleDateString("en-GB", dateOptions)}
  </span>
</a>
