---
import { Image } from "astro:assets";

const response = await fetch(
  "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=jonheslop&api_key=6908805d396f2a48dcac5ac045452754&format=json",
);
const data = await response.json();
const { image, name, artist, album, url } = data.recenttracks.track[0];
---

<div
  class="text-sm lg:col-span-4 lg:col-start-9 items-start self-center mt-32 flex gap-4"
>
  <Image
    src={image[3]["#text"]}
    alt={name}
    width={200}
    height={200}
    class="border-2 rounded-xs mix-blend-luminosity hover:mix-blend-normal"
    layout="constrained"
  />
  <div class="text-balance">
    <h5 class="uppercase font-semibold mb-2">Last played track</h5>
    {artist["#text"]}
    <span class="block">{album["#text"]}</span>
    <a href={url} class="block italic link">{name}</a>
  </div>
</div>
